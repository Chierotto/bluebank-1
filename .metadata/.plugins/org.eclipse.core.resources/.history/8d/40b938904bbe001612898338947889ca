package bluebank.jdbc.modelo;

import bluebank.jdbc.dao.ContaDao;

public class Conta {

	private int agencia;
	private int conta;
	private double saldo;
	
  public int getAgencia() {
	return agencia;
  }
  public int getConta() {
		return conta;
  }
  public double getSaldo() {
	return saldo;
  }
  public void setAgencia(int agencia) {
	this.agencia = agencia;
  }
  public void setConta(int conta) {
	this.conta = conta;
  }
  public void setSaldo(double saldo) {
	this.saldo = saldo;
  }

  public void transfere(Conta contadestino, double valor){
	  
	// verificar existencia da conta  
	  
	
	 try{
	  existeConta(this.conta); 
	  
	  
	  
	  saca(contaorigem, valor);
  
	  deposita(contadestino, valor); 
	  
	 }catch (IllegalArgumentException e) {
		 System.out.println(e.getMessage());
	} 
      
  }
  
  public void saca(double valor){
	  
	  buscaSaldo();
	  
	  if (this.saldo < valor ){
		  throw new IllegalArgumentException("Saldo Insuficiente");
	  }

	  this.saldo -= valor;
	  
	  ContaDao dao = new ContaDao(); 
	  
	  dao.AlteraSaldo(conta);
	  
  }
  
  public void deposita(double valor){
	   
	  //buscaSaldo(conta);
	  
	  this.saldo += valor;
	  
	  ContaDao dao = new ContaDao(); 
	  
	  dao.AlteraSaldo(conta);
	  
  }
  
  public void existeConta(){
	
	ContaDao dao = new ContaDao();  
	    
	if (dao.ExisteConta(conta) == 0) {
		throw new IllegalArgumentException("Conta invalida");
	}
		  
  }
  
  public void buscaSaldo(){
	 try{
	   	existeConta();
	 }catch (IllegalArgumentException e) {
		 System.out.println(e.getMessage());
	} 
	    
	ContaDao dao = new ContaDao();
	
	dao.BuscaSaldo(conta);
	    
  }  

}
